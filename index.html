<!doctype html>
<html lang="zh-cmn-Hans">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no" />
    <meta name="renderer" content="webkit" />
    <meta name="force-rendering" content="webkit" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <style>
        .box {
            display: flex;
            z-index: 3;
            height: 44px;
            background: #fff;
            border: 1px solid #dfe1e5;
            box-shadow: none;
            border-radius: 24px;
            margin: 0 auto;
            width: calc(632px + 6px);
            width: auto;
            max-width: 584px;
            background: rgba(255, 255, 255, 0.75);
        }

        .search {
            display: flex;
            flex: 1;
            flex-wrap: wrap;
            border: none;
            outline: none;
            background: rgba(255, 255, 255, 0);
        }

        .left {
            display: flex;
            align-items: center;
            padding-right: 20px;
            margin-top: -5px;
        }

        .right {
            display: flex;
            flex: 0 0 auto;
            margin-top: -5px;
            align-items: stretch;
            flex-direction: row;
            padding-left: 20px;
        }

        .topbar {
            flex: 1 0 auto;
            display: flex;
            cursor: pointer;
            align-items: center;
            border: 0;
            background: transparent;
            outline: none;
            /* padding: 0 8px; */
            width: 24px;
            /* line-height: 24px; */
            transform: translateY(30%) translateX(-35%);
            /* transform: translateX(-30%); */
        }

        [text~="xs"] {
            font-size: 0.75rem;
            line-height: 1rem;
        }

        [bg~="gray-100"] {
            --un-bg-opacity: 1;
            background-color: rgba(243, 244, 246, var(--un-bg-opacity));
        }

        @media (prefers-color-scheme: dark) {
            .dARkdOOr {
                background-color: rgb(70, 70, 70) !important;
            }
        }

        .justify-center {
            justify-content: center;
        }

        .items-center {
            align-items: center;
        }

        .flex,
        [flex~="\~"] {
            display: flex;
        }

        [w~="full"] {
            width: 100%;
        }

        [h~="\31 2"] {
            height: 3rem;
        }

        .right-0 {
            right: 0rem;
        }

        .left-0 {
            left: 0rem;
        }

        .bottom-0 {
            bottom: 0rem;
        }

        .fixed {
            position: fixed;
        }

        /*包含以下四种的链接*/
        a {
            text-decoration: none;
            color: deepskyblue;
        }

        /*正常的未被访问过的链接*/
        a:link {
            text-decoration: none;
        }

        /*已经访问过的链接*/
        a:visited {
            text-decoration: none;
        }

        /*鼠标划过(停留)的链接*/
        a:hover {
            text-decoration: none;
        }

        /* 正在点击的链接*/
        a:active {
            text-decoration: none;
        }

        .color {
            position: fixed !important;
            z-index: 999;
            top: 45px;
            right: 0;
            _position: absolute !important;
            *zoom: 1 !important;
        }
    </style>
    <!-- MDUI CSS -->
    <link rel="stylesheet" href="https://unpkg.com/mdui@1.0.2/dist/css/mdui.min.css" />
    <title>🍋OIso🔍 - 一款为OIer和开发者而生的搜索引擎</title>
    <link rel="shortcut icon" href="img/favicon.svg">
</head>

<body class="mdui-theme-layout-auto">
    <!-- <div class="mdui-toolbar mdui-color-theme">
        <div class="mdui-toolbar-spacer"></div>
        <span class="mdui-btn mdui-btn-icon mdui-ripple mdui-ripple-light-blue"
            mdui-dialog="{target: '#dialog-docs-theme'}">
            <i class="mdui-icon material-icons">color_lens</i>
        </span>
    </div> -->
    <!-- 个性化先咕了，太懒了（逃 ε=ε=ε=┏(゜ロ゜;)┛ -->

    <div class="mdui-toolbar mdui-color-theme">
        <div class="mdui-toolbar-spacer"></div>
            <button id="lbt" class="mdui-btn mdui-ripple mdui-ripple-white" mdui-dialog="{target: '#dialog-login'}" onclick="get_key();">
                登录
            </button>
    </div>

    <script>
        fetch("https://api.oiso.cf:8443/profile",{
            credentials: 'include'
        }).then(function (response) {
            return response.text();
        }).then(function (data) {
            console.log(data);
            if (data == `False`) {
                mdui.snackbar("请点击右上角登录");
            }else{
                document.getElementById("lbt").innerHTML=JSON.parse(data).name;
                document.getElementById("lbt").setAttribute("mdui-dialog","{target: '#dialog-logout'}");
                document.getElementById("lbt").setAttribute("onclick","");
            }
        }).catch(function () {
            // mdui.snackbar("服务器错误：" + data);
        });
    </script>

    <div class="mdui-container">
        <center>
            <img id="logo" src="img/logo.png" class="mdui-img-fluid" style="transform: translateY(150%);"
                onload="if(this.width >= 333){this.width = 333;}" />
        </center>
        <center>
            <div id="container" class="box mdui-hoverable" style="transform: translateY(425%);">
                <div class="left"></div>
                <input class="search" id="inputBox" type="text" placeholder="你干嘛~唉哟~" onkeypress="getKey();" />
                <div class="right">
                    <i class="mdui-icon material-icons topbar mdui-text-color-black" onclick="go();">search</i>
                </div>
            </div>
        </center>
    </div>
    <script type="text/javascript">
        //获得文本框元素
        var txtSearch = document.getElementById('inputBox');
        //文本框得到焦点事件 onfocus()
        txtSearch.onfocus = function () {
            document.getElementById("container").setAttribute("class", "box mdui-hoverable mdui-shadow-7");
        }
        //文本框失去焦点事件 onblur()
        txtSearch.onblur = function () {
            document.getElementById("container").setAttribute("class", "box mdui-hoverable");
        }
    </script>
    <!-- MDUI JavaScript -->
    <script src="https://unpkg.com/mdui@1.0.2/dist/js/mdui.min.js"></script>
    <script>
        function go() {
            var value = document.getElementById("inputBox").value;
            if (value == '') {
                mdui.snackbar("小黑子，露出鸡脚了吧~");
            } else {
                location.href = "search?q=" + value;
            }
        }
        function getKey() {
            if (event.keyCode == 13) {
                go();
            }
        }
    </script>
    <script>
        fetch("https://api.oiso.cf:8443").then(function (response) {
            return response.text();
        }).then(function (data) {
            console.log(data);
            if (data != `OIso 2022. All rights reserved.`) {
                mdui.snackbar("服务器错误：" + data);
            }
        }).catch(function () {
            mdui.snackbar("服务器炸了QWQ...");
        });
    </script>
    <!-- <div id="footer" style="position: absolute; bottom: 0; left: 50%; transform: translate(-50%, -50%);">
        <div style="height: 23px;">
            <center>
                <p><a href="https://oiso.cf">🍋Oiso.cf🔍</a> 2022 - 现在 | Developed by <a href="https://www.amzcd.top">diyanqi</a></p>
            </center>
        </div>
    </div> -->
    <div class="dARkdOOr fixed left-0 right-0 bottom-0 flex justify-center items-center" dark="bg-dark-700" bg="gray-100"
        w="full" h="12" text="xs">
        <div class="inline-flex justify-center items-center" m="x-2" style="letter-spacing:0.3px;" opacity="75"><a
                href="/"><img width="28" height="16" class="filter grayscale" m="x-2" src="img/favicon.svg"
                    alt="🍋OIso🔍" style="margin-top: -2px;transform: translateY(3px);"></a> ©️ 2022&nbsp;<a
                href="/">OIso.cf</a>&nbsp;| 2022 - 现在 | v0.5.1 测试版 | Developed
            by&nbsp;<a class="icon-btn mr-2" title="Blog" href="https://www.amzcd.top" target="_blank">diyanqi</a> | <a class="icon-btn mr-2" title="评论需 Github 账号，实在不行洛谷也可私信我" href="https://www.amzcd.top/posts/OIso/" target="_blank">👉食用指南&反馈👈</a>
        </div>
        <div class="inline-flex justify-center items-center" m="x-2"><a href="/about" class="icon-btn mx-2" title="关于">
                <div i-ri-information-line=""></div>
            </a></div>
    </div>
    <div class="mdui-dialog" id="dialog-docs-theme">
        <div class="mdui-dialog-title">设置文档主题</div>
        <div class="mdui-dialog-content">

            <p class="mdui-typo-title">主题色</p>
            <div class="mdui-row-xs-1 mdui-row-sm-2 mdui-row-md-3">
                <div class="mdui-col">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-layout" value="auto" checked="">
                        <i class="mdui-radio-icon"></i>
                        Auto
                    </label>
                </div>
                <div class="mdui-col">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-layout" value="light">
                        <i class="mdui-radio-icon"></i>
                        Light
                    </label>
                </div>
                <div class="mdui-col">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-layout" value="dark">
                        <i class="mdui-radio-icon"></i>
                        Dark
                    </label>
                </div>
            </div>

            <p class="mdui-typo-title mdui-text-color-theme">主色</p>
            <form class="mdui-row-xs-1 mdui-row-sm-2 mdui-row-md-3">
                <div class="mdui-col mdui-text-color-amber">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-primary" value="amber">
                        <i class="mdui-radio-icon"></i>
                        Amber
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-blue">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-primary" value="blue">
                        <i class="mdui-radio-icon"></i>
                        Blue
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-blue-grey">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-primary" value="blue-grey">
                        <i class="mdui-radio-icon"></i>
                        Blue Grey
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-brown">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-primary" value="brown">
                        <i class="mdui-radio-icon"></i>
                        Brown
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-cyan">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-primary" value="cyan">
                        <i class="mdui-radio-icon"></i>
                        Cyan
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-deep-orange">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-primary" value="deep-orange">
                        <i class="mdui-radio-icon"></i>
                        Deep Orange
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-deep-purple">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-primary" value="deep-purple">
                        <i class="mdui-radio-icon"></i>
                        Deep Purple
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-green">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-primary" value="green">
                        <i class="mdui-radio-icon"></i>
                        Green
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-grey">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-primary" value="grey">
                        <i class="mdui-radio-icon"></i>
                        Grey
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-indigo">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-primary" value="indigo" checked="">
                        <i class="mdui-radio-icon"></i>
                        Indigo
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-light-blue">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-primary" value="light-blue">
                        <i class="mdui-radio-icon"></i>
                        Light Blue
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-light-green">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-primary" value="light-green">
                        <i class="mdui-radio-icon"></i>
                        Light Green
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-lime">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-primary" value="lime">
                        <i class="mdui-radio-icon"></i>
                        Lime
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-orange">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-primary" value="orange">
                        <i class="mdui-radio-icon"></i>
                        Orange
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-pink">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-primary" value="pink">
                        <i class="mdui-radio-icon"></i>
                        Pink
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-purple">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-primary" value="purple">
                        <i class="mdui-radio-icon"></i>
                        Purple
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-red">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-primary" value="red">
                        <i class="mdui-radio-icon"></i>
                        Red
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-teal">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-primary" value="teal">
                        <i class="mdui-radio-icon"></i>
                        Teal
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-yellow">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-primary" value="yellow">
                        <i class="mdui-radio-icon"></i>
                        Yellow
                    </label>
                </div>
            </form>

            <p class="mdui-typo-title mdui-text-color-theme-accent">强调色</p>
            <form class="mdui-row-xs-1 mdui-row-sm-2 mdui-row-md-3">
                <div class="mdui-col mdui-text-color-amber">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-accent" value="amber">
                        <i class="mdui-radio-icon"></i>
                        Amber
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-blue">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-accent" value="blue">
                        <i class="mdui-radio-icon"></i>
                        Blue
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-cyan">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-accent" value="cyan">
                        <i class="mdui-radio-icon"></i>
                        Cyan
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-deep-orange">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-accent" value="deep-orange">
                        <i class="mdui-radio-icon"></i>
                        Deep Orange
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-deep-purple">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-accent" value="deep-purple">
                        <i class="mdui-radio-icon"></i>
                        Deep Purple
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-green">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-accent" value="green">
                        <i class="mdui-radio-icon"></i>
                        Green
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-indigo">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-accent" value="indigo">
                        <i class="mdui-radio-icon"></i>
                        Indigo
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-light-blue">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-accent" value="light-blue">
                        <i class="mdui-radio-icon"></i>
                        Light Blue
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-light-green">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-accent" value="light-green">
                        <i class="mdui-radio-icon"></i>
                        Light Green
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-lime">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-accent" value="lime">
                        <i class="mdui-radio-icon"></i>
                        Lime
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-orange">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-accent" value="orange">
                        <i class="mdui-radio-icon"></i>
                        Orange
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-pink">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-accent" value="pink" checked="">
                        <i class="mdui-radio-icon"></i>
                        Pink
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-purple">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-accent" value="purple">
                        <i class="mdui-radio-icon"></i>
                        Purple
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-red">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-accent" value="red">
                        <i class="mdui-radio-icon"></i>
                        Red
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-teal">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-accent" value="teal">
                        <i class="mdui-radio-icon"></i>
                        Teal
                    </label>
                </div>
                <div class="mdui-col mdui-text-color-yellow">
                    <label class="mdui-radio mdui-m-b-1">
                        <input type="radio" name="theme-accent" value="yellow">
                        <i class="mdui-radio-icon"></i>
                        Yellow
                    </label>
                </div>
            </form>

        </div>
        <div class="mdui-divider"></div>
        <div class="mdui-dialog-actions">
            <button class="mdui-btn mdui-ripple mdui-float-left" mdui-dialog-cancel="">恢复默认主题</button>
            <button class="mdui-btn mdui-ripple" mdui-dialog-confirm="">ok</button>
        </div>
    </div>

    <div class="mdui-dialog" id="dialog-logout">
        <div class="mdui-dialog-title">退出登录</div>
        <div class="mdui-dialog-content">确定要退出登录吗？</div>
        <div class="mdui-dialog-actions">
            <button class="mdui-btn mdui-ripple" mdui-dialog-cancel="">取消</button>
            <button class="mdui-btn mdui-ripple" mdui-dialog-confirm="" onclick="gologout();">确定</button>
        </div>
        <script>
            function gologout(){
                fetch("https://api.oiso.cf:8443/logout").then(function (response) {
                    return response.text();
                }).then(function (data) {
                    console.log(data);
                    if(data=='True'){
                        mdui.snackbar("登出成功；请刷新页面");
                    }else{
                        mdui.snackbar("登出失败");
                    }
                }).catch(function () {
                    mdui.snackbar("服务器开小差了……");
                });
            }
        </script>
    </div>

    <div class="mdui-dialog" id="dialog-login">
        <div class="mdui-dialog-title">通过洛谷登录</div>
        <div class="mdui-dialog-content mdui-typo">

            <p class="mdui-typo-title">STEP 1</p>
            <p>利用您已经登录的洛谷账号，新建一个<a href="https://www.luogu.com.cn/paste" target="_blank">洛谷剪贴板</a>，并将下面的密钥粘贴其中<b>（有效期为 10 分钟）</b>。</p>
            <pre>加载中，请稍后……</pre>
            <script>
                function copy_key() {
                    var key = document.querySelector("#dialog-login pre").innerText;
                    var input = document.createElement("input");
                    input.value = key;
                    document.body.appendChild(input);
                    input.select();
                    document.execCommand("copy");
                    document.body.removeChild(input);
                    mdui.snackbar({
                        message: "已复制密钥",
                        position: "right-top"
                    });
                }
            </script>
            <p><button class="mdui-btn mdui-color-theme-accent mdui-ripple mdui-btn-dense" onclick="copy_key();">【一键粘贴】</button>然后选择发布。注意要<b>公开</b>可见！</p>

            <p class="mdui-typo-title">STEP 2</p>
            <p>发布后，请将这个云剪贴板的链接粘贴到下面：</p>
            <div class="mdui-textfield">
                <input class="mdui-textfield-input" type="text" placeholder="形如：https://www.luogu.com.cn/paste/ler564eo"/>
              </div>
            <p>完成后，请点击下方确认按钮进行校验。</p>

        </div>
        <div class="mdui-divider"></div>
        <div class="mdui-dialog-actions">
            <button class="mdui-btn mdui-ripple" mdui-dialog-confirm="" onclick="gologin();">确认</button>
        </div>
        <script>
            function get_key(){
                fetch("https://api.oiso.cf:8443/key_request").then(function (response) {
                    return response.text();
                }).then(function (data) {
                    console.log(data);
                    document.querySelector("#dialog-login pre").innerText = data;
                }).catch(function () {
                    mdui.snackbar("获取密钥失败……会不会是访问太频繁了？");
                });
            }
            function gologin(){
                var url = document.querySelector("#dialog-login input").value;
                if(url == ""){
                    mdui.snackbar("请输入云剪贴板的链接");
                    return;
                }
                fetch("https://api.oiso.cf:8443/key_check?url=" + url).then(function (response) {
                    return response.text();
                }).then(function (data) {
                    console.log(data);
                    if(data != "False"){
                        mdui.snackbar("登录成功！请刷新页面！");
                    }else{
                        mdui.snackbar("登录失败……");
                    }
                }).catch(function () {
                    mdui.snackbar("登录失败……");
                });
            }
        </script>
    </div>
</body>

</html>